{"version":3,"file":"recommender.min.js","sources":["../src/recommender.js"],"sourcesContent":["/**\n * Course recommender AMD module.\n *\n * @module     block_course_recommender/recommender\n * @copyright  2025 Sadik Mert\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str'], function($, Ajax, Notification, Str) {\n\n    /**\n     * Initialize the module.\n     */\n    function init() {\n        var form = $('#courserecommender-form');\n        var resultsContainer = $('.courserecommender-results');\n\n        if (!form.length || !resultsContainer.length) {\n            return;\n        }\n\n        // Handle form submission\n        form.on('submit', function(e) {\n            e.preventDefault();\n            updateResults(form, resultsContainer);\n        });\n\n        // Handle checkbox changes\n        form.find('input[type=\"checkbox\"]').on('change', function() {\n            clearTimeout(window.changeTimeout);\n            window.changeTimeout = setTimeout(function() {\n                form.submit();\n            }, 500);\n        });\n    }\n\n    /**\n     * Update results using AJAX.\n     *\n     * @param {jQuery} form The form element\n     * @param {jQuery} resultsContainer The results container element\n     */\n    function updateResults(form, resultsContainer) {\n        // Show loading indicator\n        resultsContainer.html('<div class=\"text-center\"><span class=\"spinner-border\"></span></div>');\n\n        // Get selected interests\n        var interests = form.find('input[name=\"interests[]\"]:checked').map(function() {\n            return $(this).val();\n        }).get();\n\n        // Prepare request\n        var request = {\n            methodname: 'block_course_recommender_get_courses',\n            args: {\n                interests: interests,\n                sesskey: M.cfg.sesskey\n            }\n        };\n\n        // Make AJAX call\n        Ajax.call([request])[0]\n            .done(function(response) {\n                resultsContainer.fadeOut(200, function() {\n                    $(this).html(response.html).fadeIn(200);\n                });\n            })\n            .fail(function(error) {\n                Notification.exception(error);\n                Str.get_string('error', 'block_course_recommender')\n                    .then(function(errorStr) {\n                        resultsContainer.html('<div class=\"alert alert-danger\">' + errorStr + '</div>');\n                        return;\n                    });\n            });\n    }\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","Ajax","Notification","Str","init","form","resultsContainer","length","on","e","preventDefault","html","request","methodname","args","interests","find","map","this","val","get","sesskey","M","cfg","call","done","response","fadeOut","fadeIn","fail","error","exception","get_string","then","errorStr","updateResults","clearTimeout","window","changeTimeout","setTimeout","submit"],"mappings":";;;;;;;AAOAA,8CAAO,CAAC,SAAU,YAAa,oBAAqB,aAAa,SAASC,EAAGC,KAAMC,aAAcC,WAqEtF,CACHC,oBAhEIC,KAAOL,EAAE,2BACTM,iBAAmBN,EAAE,8BAEpBK,KAAKE,QAAWD,iBAAiBC,SAKtCF,KAAKG,GAAG,UAAU,SAASC,GACvBA,EAAEC,0BAmBaL,KAAMC,kBAEzBA,iBAAiBK,KAAK,2EAQlBC,QAAU,CACVC,WAAY,uCACZC,KAAM,CACFC,UARQV,KAAKW,KAAK,qCAAqCC,KAAI,kBACxDjB,EAAEkB,MAAMC,SAChBC,MAOKC,QAASC,EAAEC,IAAIF,UAKvBpB,KAAKuB,KAAK,CAACZ,UAAU,GAChBa,MAAK,SAASC,UACXpB,iBAAiBqB,QAAQ,KAAK,WAC1B3B,EAAEkB,MAAMP,KAAKe,SAASf,MAAMiB,OAAO,WAG1CC,MAAK,SAASC,OACX5B,aAAa6B,UAAUD,OACvB3B,IAAI6B,WAAW,QAAS,4BACnBC,MAAK,SAASC,UACX5B,iBAAiBK,KAAK,mCAAqCuB,SAAW,gBA/ClFC,CAAc9B,KAAMC,qBAIxBD,KAAKW,KAAK,0BAA0BR,GAAG,UAAU,WAC7C4B,aAAaC,OAAOC,eACpBD,OAAOC,cAAgBC,YAAW,WAC9BlC,KAAKmC,WACN"}